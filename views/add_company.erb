<h1>Add Company</h1>
<br />
<form id = "addCompany" method = "post" action = "/addcompany">
	<div class = "form-group">
		<!-- <label for = "company">Company Name</label> -->
		<input type = "text" class = "form-control" name = "company" id = "company" placeholder = "Full company name">
	</div>
	<br />
	<button type = "submit" class = "btn btn-primary">Submit</button>
</form>

<script>
	$("#addCompany").validate({
		rules: {
			company: {
				required: true
			}
		}
	});
</script>

<script>
	var substringMatcher = function(strs) {
		return function findMatches(q, cb) {
		var matches, substringRegex;

		// an array that will be populated with substring matches
		matches = [];

		// regex used to determine if a string contains the substring `q`
		substrRegex = new RegExp(q, 'i');

		// iterate through the pool of strings and for any string that
		// contains the substring `q`, add it to the `matches` array
		$.each(strs, function(i, str) {
			if (substrRegex.test(str)) {
				matches.push(str);
			}
		});

		cb(matches);
		};
	};

	$('#company').typeahead({
		hint: true,
		highlight: true,
		minLength: 1
		},
		{
			source: function (query, syncResults, asyncResults) {
					$.get('/search-company?company=' + encodeURIComponent(query), function (data) {
							if (data && data.data && data.data.name) {
									asyncResults([data.data.name]);
							}
					})
			}
		});
</script>